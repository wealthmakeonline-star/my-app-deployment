2026-01-11 17:52:45,447 - __main__ - INFO - üåê API Server Logging Initialized
2026-01-11 17:52:45,448 - __main__ - INFO - üìù Logs saved to: logs/dq_api_20260111_175245.log
2026-01-11 17:52:45,520 - dq_rules - WARNING - Could not load config from database: name 'get_db_connection' is not defined
2026-01-11 17:52:45,523 - __main__ - INFO - APP_SETTINGS loaded. Audit enabled: True
2026-01-11 17:52:45,523 - __main__ - INFO - ‚úÖ All DQ modules loaded successfully
2026-01-11 17:52:45,526 - dq_error_log - INFO - ErrorLogger initialized with database: dq_checks
2026-01-11 17:52:45,527 - dq_audit - INFO - Audit class initialized with database: dq_checks
2026-01-11 17:52:45,528 - __main__ - INFO - ‚úÖ ErrorLogger and DataQualityAudit initialized
2026-01-11 17:52:45,535 - __main__ - INFO - üöÄ Starting Data Quality Framework API
2026-01-11 17:52:45,536 - __main__ - INFO - üìä Modules available: True
2026-01-11 17:52:45,537 - __main__ - INFO - üîß Config file mode: False
2026-01-11 17:52:45,538 - __main__ - INFO - üìã Available endpoints:
2026-01-11 17:52:45,539 - __main__ - INFO -   GET  /              - API status
2026-01-11 17:52:45,540 - __main__ - INFO -   GET  /api/health    - Health check
2026-01-11 17:52:45,541 - __main__ - INFO -   POST /api/check-single - Single source analysis
2026-01-11 17:52:45,541 - __main__ - INFO -   POST /api/compare   - Source-target comparison
2026-01-11 17:52:45,542 - __main__ - INFO -   POST /api/upload    - File upload
2026-01-11 17:52:45,543 - __main__ - INFO -   GET  /api/sessions  - List sessions
2026-01-11 17:52:45,544 - __main__ - INFO -   GET  /api/sessions/<id> - Get session data
2026-01-11 17:52:45,544 - __main__ - INFO -   GET  /api/debug-db  - Database debug
2026-01-11 17:52:45,545 - __main__ - INFO - üåç Server starting on 0.0.0.0:5000 (debug=False)
2026-01-11 17:52:48,702 - __main__ - INFO - POST /api/rules - Request started
2026-01-11 17:52:48,703 - __main__ - INFO - Business rules analysis request received
2026-01-11 17:52:48,704 - __main__ - INFO - DEBUG: Received data keys: ['source_type', 'file_path', 'rule_type', 'create_null_checks', 'create_threshold', 'create_pattern', 'create_range', 'create_kpi', 'threshold_columns', 'pattern_columns', 'pattern_type', 'range_columns', 'run_text_comparison', 'actual_column', 'expected_column']
2026-01-11 17:52:48,706 - __main__ - INFO - DEBUG Rules: source_type=csv
2026-01-11 17:52:48,706 - __main__ - INFO - DEBUG Rules: File path set to C:/Users/003160/OneDrive - wisseninfotech.com/Documents/DQ-Checks-Shashi/Test_data/sample_data.csv
2026-01-11 17:52:48,707 - __main__ - INFO - DEBUG Rules: Prepared UI data with 8 fields
2026-01-11 17:52:48,708 - __main__ - INFO - Starting business rules analysis for session RULES_20260111_175248_d81c11cb
2026-01-11 17:52:48,709 - __main__ - INFO - DEBUG: UI data prepared: ['analysis_type', 'source_type', 'file_path', 'rule_type', 'run_text_comparison', 'actual_column', 'expected_column', 'use_metadata_rules']
2026-01-11 17:52:48,709 - __main__ - INFO - DEBUG: source_type=csv
2026-01-11 17:52:48,710 - __main__ - INFO - DEBUG: file_path=C:/Users/003160/OneDrive - wisseninfotech.com/Documents/DQ-Checks-Shashi/Test_data/sample_data.csv
2026-01-11 17:52:48,711 - dq_rules - INFO - LOADING DATA FOR BUSINESS RULES
2026-01-11 17:52:48,711 - dq_rules - INFO - === DEBUG load_data_for_rules ===
2026-01-11 17:52:48,712 - dq_rules - INFO - UI data type: <class 'dict'>
2026-01-11 17:52:48,712 - dq_rules - INFO - UI data keys: ['analysis_type', 'source_type', 'file_path', 'rule_type', 'run_text_comparison', 'actual_column', 'expected_column', 'use_metadata_rules', 'session_id']
2026-01-11 17:52:48,713 - dq_rules - INFO - File path in UI data: C:/Users/003160/OneDrive - wisseninfotech.com/Documents/DQ-Checks-Shashi/Test_data/sample_data.csv
2026-01-11 17:52:48,713 - dq_rules - INFO - ===============================
2026-01-11 17:52:48,714 - dq_rules - INFO - Prompting user for data source type for rules
2026-01-11 17:52:48,714 - dq_rules - INFO - Using source_type from UI data: csv
2026-01-11 17:52:48,715 - dq_rules - INFO - Source type: csv, Source config: C:/Users/003160/OneDrive - wisseninfotech.com/Documents/DQ-Checks-Shashi/Test_data/sample_data.csv
2026-01-11 17:52:48,715 - dq_unified - INFO - Loading data from CSV
2026-01-11 17:52:48,716 - dq_unified - INFO - Loading large CSV: C:/Users/003160/OneDrive - wisseninfotech.com/Documents/DQ-Checks-Shashi/Test_data/sample_data.csv
2026-01-11 17:52:48,719 - dq_unified - INFO - CSV file has 15 rows
2026-01-11 17:52:48,719 - dq_unified - INFO - Loading 15 rows from CSV...
2026-01-11 17:52:48,729 - dq_unified - INFO - Loaded 15 rows from CSV
2026-01-11 17:52:48,734 - dq_unified - INFO - Memory optimization: 0.0MB -> 0.0MB (Saved: 0.0MB)
2026-01-11 17:52:48,734 - dq_unified - INFO - Standardizing data types...
2026-01-11 17:52:48,738 - dq_unified - INFO - Data type standardization complete
2026-01-11 17:52:48,740 - dq_unified - INFO - Loaded 15 rows, 10 columns. Memory: 103.1MB total, 0.0MB for dataframe
2026-01-11 17:52:48,740 - dq_rules - INFO - Loaded data: 15 rows, 10 columns
2026-01-11 17:52:48,742 - dq_error_log - INFO - ErrorLogger initialized with database: dq_checks
2026-01-11 17:52:48,743 - dq_rules - INFO - DEFINING CUSTOM BUSINESS RULES
2026-01-11 17:52:48,744 - dq_rules - INFO - Available columns: ['CustomerName', 'Email', 'Phone', 'Salary', 'Department', 'JoinDate', 'PostalCode', 'City', 'Country', 'State']
2026-01-11 17:52:48,745 - dq_rules - INFO - Available columns: ['CustomerName', 'Email', 'Phone', 'Salary', 'Department', 'JoinDate', 'PostalCode', 'City', 'Country', 'State']
2026-01-11 17:52:48,745 - dq_rules - INFO - UI specified use_metadata_rules: False
2026-01-11 17:52:48,746 - dq_rules - INFO - User selected rule type: 6
2026-01-11 17:52:48,747 - dq_rules - INFO - CREATING COMPREHENSIVE RULE SET
2026-01-11 17:52:48,749 - dq_rules - INFO - THRESHOLD RULES SETUP
2026-01-11 17:52:48,750 - dq_rules - INFO - Available numeric columns: ['Phone', 'Salary', 'PostalCode']
2026-01-11 17:52:48,752 - dq_rules - INFO - Using default create_threshold: n
2026-01-11 17:52:48,753 - dq_rules - INFO - PATTERN RULES SETUP
2026-01-11 17:52:48,754 - dq_rules - INFO - Available string columns: ['CustomerName', 'Email', 'JoinDate', 'City', 'State']
2026-01-11 17:52:48,755 - dq_rules - INFO - Using default create_pattern: n
2026-01-11 17:52:48,755 - dq_rules - INFO - RANGE RULES SETUP
2026-01-11 17:52:48,756 - dq_rules - INFO - Available numeric columns: ['Phone', 'Salary', 'PostalCode']
2026-01-11 17:52:48,756 - dq_rules - INFO - Using default create_range: n
2026-01-11 17:52:48,758 - dq_rules - INFO - NULL CHECK RULES SETUP
2026-01-11 17:52:48,758 - dq_rules - INFO - Using default create_null_checks: y
2026-01-11 17:52:48,759 - dq_rules - INFO - Checking for columns with null values...
2026-01-11 17:52:48,760 - dq_rules - INFO - Found 1 null values in 'CustomerName'
2026-01-11 17:52:48,761 - dq_rules - INFO - Created null check rule for CustomerName
2026-01-11 17:52:48,762 - dq_rules - INFO - Found 1 null values in 'Email'
2026-01-11 17:52:48,762 - dq_rules - INFO - Created null check rule for Email
2026-01-11 17:52:48,765 - dq_rules - INFO - Found 2 null values in 'Salary'
2026-01-11 17:52:48,766 - dq_rules - INFO - Created null check rule for Salary
2026-01-11 17:52:48,767 - dq_rules - INFO - Found 1 null values in 'Department'
2026-01-11 17:52:48,767 - dq_rules - INFO - Created null check rule for Department
2026-01-11 17:52:48,769 - dq_rules - INFO - Found 1 null values in 'PostalCode'
2026-01-11 17:52:48,769 - dq_rules - INFO - Created null check rule for PostalCode
2026-01-11 17:52:48,770 - dq_rules - INFO - Found 1 null values in 'State'
2026-01-11 17:52:48,770 - dq_rules - INFO - Created null check rule for State
2026-01-11 17:52:48,772 - dq_rules - INFO - KPI THRESHOLD RULES SETUP
2026-01-11 17:52:48,772 - dq_rules - INFO - Using default create_kpi: n
2026-01-11 17:52:48,773 - dq_rules - INFO - Created comprehensive rule set with 6 rules
2026-01-11 17:52:48,774 - dq_rules - INFO - Defined 6 business rules
2026-01-11 17:52:48,774 - dq_rules - INFO - EXECUTING 6 BUSINESS RULES
2026-01-11 17:52:48,776 - dq_rules - INFO - Executing rule: CustomerName should have no null values (currently 1 nulls)
2026-01-11 17:52:48,777 - dq_rules - INFO - Safe executing rule: CustomerName should have no null values (currently 1 nulls) (threshold)
2026-01-11 17:52:48,778 - dq_rules - INFO - Executing threshold rule: CustomerName should have no null values (currently 1 nulls)
2026-01-11 17:52:48,779 - dq_rules - INFO - Threshold rule 'CustomerName should have no null values (currently 1 nulls)': 0 violations found
2026-01-11 17:52:48,780 - dq_rules - INFO - No violations found
2026-01-11 17:52:48,782 - dq_rules - INFO - Rule 'CustomerName should have no null values (currently 1 nulls)' completed with status: PASS
2026-01-11 17:52:48,783 - dq_rules - INFO - Executing rule: Email should have no null values (currently 1 nulls)
2026-01-11 17:52:48,784 - dq_rules - INFO - Safe executing rule: Email should have no null values (currently 1 nulls) (threshold)
2026-01-11 17:52:48,785 - dq_rules - INFO - Executing threshold rule: Email should have no null values (currently 1 nulls)
2026-01-11 17:52:48,786 - dq_rules - INFO - Threshold rule 'Email should have no null values (currently 1 nulls)': 0 violations found
2026-01-11 17:52:48,787 - dq_rules - INFO - No violations found
2026-01-11 17:52:48,789 - dq_rules - INFO - Rule 'Email should have no null values (currently 1 nulls)' completed with status: PASS
2026-01-11 17:52:48,789 - dq_rules - INFO - Executing rule: Salary should have no null values (currently 2 nulls)
2026-01-11 17:52:48,790 - dq_rules - INFO - Safe executing rule: Salary should have no null values (currently 2 nulls) (threshold)
2026-01-11 17:52:48,791 - dq_rules - INFO - Executing threshold rule: Salary should have no null values (currently 2 nulls)
2026-01-11 17:52:48,792 - dq_rules - INFO - Threshold rule 'Salary should have no null values (currently 2 nulls)': 0 violations found
2026-01-11 17:52:48,792 - dq_rules - INFO - No violations found
2026-01-11 17:52:48,794 - dq_rules - INFO - Rule 'Salary should have no null values (currently 2 nulls)' completed with status: PASS
2026-01-11 17:52:48,798 - dq_rules - INFO - Executing rule: Department should have no null values (currently 1 nulls)
2026-01-11 17:52:48,798 - dq_rules - INFO - Safe executing rule: Department should have no null values (currently 1 nulls) (threshold)
2026-01-11 17:52:48,799 - dq_rules - INFO - Executing threshold rule: Department should have no null values (currently 1 nulls)
2026-01-11 17:52:48,800 - dq_rules - INFO - Threshold rule 'Department should have no null values (currently 1 nulls)': 0 violations found
2026-01-11 17:52:48,801 - dq_rules - INFO - No violations found
2026-01-11 17:52:48,802 - dq_rules - INFO - Rule 'Department should have no null values (currently 1 nulls)' completed with status: PASS
2026-01-11 17:52:48,803 - dq_rules - INFO - Executing rule: PostalCode should have no null values (currently 1 nulls)
2026-01-11 17:52:48,803 - dq_rules - INFO - Safe executing rule: PostalCode should have no null values (currently 1 nulls) (threshold)
2026-01-11 17:52:48,804 - dq_rules - INFO - Executing threshold rule: PostalCode should have no null values (currently 1 nulls)
2026-01-11 17:52:48,805 - dq_rules - INFO - Threshold rule 'PostalCode should have no null values (currently 1 nulls)': 0 violations found
2026-01-11 17:52:48,806 - dq_rules - INFO - No violations found
2026-01-11 17:52:48,807 - dq_rules - INFO - Rule 'PostalCode should have no null values (currently 1 nulls)' completed with status: PASS
2026-01-11 17:52:48,808 - dq_rules - INFO - Executing rule: State should have no null values (currently 1 nulls)
2026-01-11 17:52:48,808 - dq_rules - INFO - Safe executing rule: State should have no null values (currently 1 nulls) (threshold)
2026-01-11 17:52:48,809 - dq_rules - INFO - Executing threshold rule: State should have no null values (currently 1 nulls)
2026-01-11 17:52:48,810 - dq_rules - INFO - Threshold rule 'State should have no null values (currently 1 nulls)': 0 violations found
2026-01-11 17:52:48,811 - dq_rules - INFO - No violations found
2026-01-11 17:52:48,813 - dq_rules - INFO - Rule 'State should have no null values (currently 1 nulls)' completed with status: PASS
2026-01-11 17:52:48,814 - dq_rules - INFO - TOTAL VIOLATIONS ACROSS ALL RULES: 0
2026-01-11 17:52:48,815 - dq_rules - INFO - GENERATING BUSINESS RULES VALIDATION REPORT
2026-01-11 17:52:48,977 - dq_error_log - INFO - Retrieved 0 errors for session RULES_20260111_175248
2026-01-11 17:52:48,978 - dq_rules - INFO - DQ Score Calculation: Total=15, Bad=0, Good=15, Score=100.00%, Grade=A
2026-01-11 17:52:48,978 - dq_audit - INFO - Audit class initialized with database: dq_checks
2026-01-11 17:52:48,980 - dq_audit - INFO - Starting database insertion for rules...
2026-01-11 17:52:48,993 - dq_audit - INFO - Inserted rules record with ID: 624
2026-01-11 17:52:48,994 - dq_rules - INFO - Audit record logged with ID: 624
2026-01-11 17:52:48,994 - dq_rules - INFO - Returning JSON report for API, Session: RULES_20260111_175248
2026-01-11 17:52:48,995 - dq_rules - INFO - GENERATING BUSINESS RULES VALIDATION REPORT FOR API
2026-01-11 17:52:48,995 - dq_rules - INFO - API Report: Rules Executed: 6, Compliance Score: 100.0%
2026-01-11 17:52:49,004 - dq_error_log - INFO - Retrieved 0 error logs for session RULES_20260111_175248
2026-01-11 17:52:49,014 - dq_error_log - INFO - Retrieved summary: 0 total errors for session RULES_20260111_175248
2026-01-11 17:52:49,015 - dq_audit - INFO - Audit class initialized with database: dq_checks
2026-01-11 17:52:49,025 - dq_audit - INFO - Retrieved 1 audit logs for session RULES_20260111_175248
2026-01-11 17:52:49,028 - dq_rules - INFO - RUNNING SEPARATE TEXT COMPARISON
2026-01-11 17:52:49,030 - dq_rules - INFO - DATA SUMMARY: Actual column: 'CustomerName', Expected column: 'Department', Total rows: 15
2026-01-11 17:52:49,031 - dq_rules - INFO - Executing row-by-row text comparison: Text comparison: 'CustomerName' contains 'Department' (row-by-row)
2026-01-11 17:52:49,032 - dq_rules - INFO - COMPARISON DETAILS: Actual column: 'CustomerName', Expected column: 'Department', Total rows to check: 15
2026-01-11 17:52:49,151 - dq_rules - WARNING - 13 text comparison violations found
2026-01-11 17:52:49,151 - dq_rules - INFO - SUMMARY STATISTICS: Total rows checked: 15, Valid comparisons: 13, Skipped (null/empty): 2, Violations: 13, Success rate: 0.0%
2026-01-11 17:52:49,160 - dq_error_log - INFO - Retrieved 13 error logs for session RULES_20260111_175248
2026-01-11 17:52:49,169 - dq_error_log - INFO - Retrieved summary: 13 total errors for session RULES_20260111_175248
2026-01-11 17:52:49,179 - dq_audit - INFO - Retrieved 1 audit logs for session RULES_20260111_175248
2026-01-11 17:52:49,179 - __main__ - INFO - Business rules analysis completed for session RULES_20260111_175248
2026-01-11 17:52:49,180 - __main__ - INFO - Results keys: ['session_id', 'check_type', 'source_info', 'source_file', 'data_stats', 'rules_validation', 'summary', 'error_logs', 'error_summary', 'audit_logs', 'text_comparison']
2026-01-11 17:52:49,183 - __main__ - INFO - Rules Summary: 6 rules executed, 6 passed, 0 failed, Score: 100.0%
2026-01-11 17:52:49,184 - __main__ - INFO - Completed with status 200 in 0.482s
